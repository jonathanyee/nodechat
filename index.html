<html>
<head>
  <title>Chat</title>

  <style type="text/css">
    #chats {
      margin: 0 auto;
      overflow: auto;
      padding: 0;
      width: 1000px;
    }

    ul {
      list-style: none;
      padding: 0;
    }

    li {
      padding: 5px;
      border-bottom: 1px solid #ccc;
    }

    #sender {
      position: absolute;
      bottom: 0;
    }
  </style>
  <link href="/js/apprise-v2.min.css" rel="stylesheet" type="text/css">

  <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
  <script src="/socket.io/socket.io.js"></script>
  <script src="/js/apprise-v2.min.js"></script>

  <script>
    $(document).ready(function(){
      var socket = io.connect('http://localhost');
      var chats = $("#chats ul");

      var options = {
        buttons: {
          confirm: {
            text: 'Okay',
            className: 'blue',
            action: function(e) {
              socket.emit('addUser', e.input);
              console.log(e);
              Apprise('close');
            }
          },
        },
        input: true,
      };

      socket.on('connect', function() {
        Apprise("What's your name?", options);
      });

      socket.on('displayChat', function (username, data) {
        chats.append($("<li></li>").text(username + " : " + data));
      });

      var message = $("#message");

      message.keypress(function(event) {
        if ((event.keyCode || event.which) == 13) {
          socket.emit('sendChat', message.val());
          message.val('');
        }
      });
    });
  </script>
</head>
<body>

  <div id="chats">
    <ul></ul>
  </div>

  <div id="sender">
    <input id="message" type="text">
  </div>

</body>
</html>